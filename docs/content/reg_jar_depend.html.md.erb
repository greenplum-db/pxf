---
title: Registering PXF Library Dependencies
---

<!--
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
-->

You use PXF to access data stored on external systems. Depending upon the external data store, this access may require that you install and/or configure additional components or services for the external data store.

PXF depends on JAR files and other configuration information provided by these additional components. The `$PXF_HOME/conf/pxf-private.classpath` file identifies PXF internal JAR dependencies. In most cases, PXF manages the `pxf-private.classpath` file, adding entries as necessary based on the connectors that you use.

Should you need to add additional JAR or native library dependencies, you must register these dependencies with PXF.

## <a id="reg_jar"></a> Registering a JAR Dependency

To add a JAR dependency for PXF, for example a MySQL driver JAR file, you must log in to the Greenplum Database master host, copy the JAR file to the PXF user configuration runtime library directory (`$PXF_CONF/lib`), sync the PXF configuration to the Greenplum Database cluster, and then restart PXF on each segment host. For example:

``` shell
$ ssh gpadmin@<gpmaster>
gpadmin@gpmaster$ cp new_dependent_jar.jar $PXF_CONF/lib/
gpadmin@gpmaster$ pxf cluster sync
gpadmin@gpmaster$ pxf cluster restart
```

## <a id="reg_native"></a> Registering a Native Library Dependency

To register a native library dependency for PXF, for example [Hadoop native libraries](https://hadoop.apache.org/docs/r2.9.2/hadoop-project-dist/hadoop-common/NativeLibraries.html), you must copy the native library to the Greenplum hosts, update PXF user configuration, synchronize the PXF configuration to the cluster, and then restart PXF on each segment host.

You have two options for copying the native library to Greenplum hosts:

- You copy the library to the same location on the Greenplum master, standby, and all segment hosts.
- You copy the library to the `$PXF_CONF/lib` directory hierarchy on the Greenplum master host. When you next synchronize PXF, the PXF configuration, including the native library, is copied to all hosts in the Greenplum Database cluster.

### <a id="reg_native_proc"></a> Procedure

1. Copy the native library file to a user-defined location on all Greenplum Database hosts, or copy to the `$PXF_CONF/lib` directory hierarchy on the Greenplum Database master node. Note the file system location of the native library.

2. Open the `$PXF_CONF/conf/pxf-env.sh` in the editor of your choice, and set `LD_LIBRARY_PATH`. For example, if you copied a native library named `dependent_native_lib.so` to `/usr/local/lib/dependent_native_lib.so` on all Greenplum hosts, add the following text to the `pxf-env.sh` file to set this environment variable:

    ``` shell
    export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/lib/
    ```

    If you copied a native library named `dependent_native_lib.so` to `$PXF_CONF/lib/native/dependent_native_lib.so` on the Greenplum master host, add the following text to the `pxf-env.sh` file to set this environment variable:

    ``` shell
    export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:$PXF_CONF/lib/native/
    ```

3. Save the file and exit the editor.

4. Synchronize the PXF configuration from the Greenplum Database master host to the standby and segment hosts. 

    ``` shell
    gpadmin@gpmaster$ pxf cluster sync
    ```

    If you copied the native library to the `$PXF_CONF/lib` directory hierarchy, this command copies the library to the same location on the standby and segment hosts. 

5. Restart PXF on all segment hosts:

    ``` shell
    gpadmin@gpmaster$ pxf cluster restart
    ```

