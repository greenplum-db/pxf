{% set name = 'testing-gate-for-pxf-gp' %}
{% set job_names.all = job_names.all + [name] %}
- name: [[name]]
  plan:
  - in_parallel:
    - get: pxf-src
      trigger: true
      passed: [[job_names.tests['basic']]]
{% call(x) macros.for_each_config(build_test_pxf_combinations) %}
    - get: gpdb[[x.gp_ver]]-pxf-dev-[[x.test_platform]]-image
      passed: [[job_names.resources['gpdb' ~x .gp_ver~'-pxf-dev-'~x.test_platform~'-image']]]
    {% if x.test_os != 'oel' %}
    - get: pxf-gp[[x.gp_ver]]-tarball-[[x.release_platform]]
      passed: [[job_names.resources['pxf-gp' ~x .gp_ver~'-tarball-'~x.release_platform]]]
    - get: gpdb[[x.gp_ver]]-[[x.release_platform]]-[[x.pkg_type]]-latest-0
      passed: [[job_names.resources['pxf-gp' ~x .gp_ver~'-tarball-'~x.release_platform]]]
    {% endif %}
{% endcall %}
