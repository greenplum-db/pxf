{% set job_names.all = job_names.all + ['compatibility-gate-for-pxf-gp'] %}
- name: compatibility-gate-for-pxf-gp
  plan:
  - in_parallel:
    - get: pxf-src
      trigger: true
      passed: [[job_names.extended_tests]]
{% call(x) macros.for_each_config(build_test_pxf_combinations) %}
{% if x.test_platform == x.build_platform %}
    - get: pxf-gp[[x.gp_ver]]-tarball-[[x.release_platform]]
    {% if job_names.resources['pxf-gp' ~x .gp_ver~'-tarball-'~x.test_platform] | length == 0 %}
      passed: ['testing-gate-for-pxf-gp']
    {% else %}
      passed: [[job_names.resources['pxf-gp' ~x .gp_ver~'-tarball-'~x.test_platform]]]
    {% endif %}
{% endif %}
{% endcall %}
