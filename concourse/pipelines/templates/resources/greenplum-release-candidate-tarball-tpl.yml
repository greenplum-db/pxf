{# Template for a PXF build artifact resource definition.
 #
 # Expects a dictionary with the name 'x' to be set as defined in macros.j2 file
 #}

{# include PXF artifact only if both build and test platform are the same to avoid duplicates
 # for example, the 'oel7' test platform does not have an 'oel7' build job and uses 'centos7' artifacts
 #}

- name: gpdb[[x.gp_ver]]-tarball-[[x.test_platform]]
  type: gcs
  icon: google-drive
  source:
    bucket: ((ud/pxf/common/gpdb-concourse-resources-prod-bucket-name))
    json_key: ((concourse-gcs-resources-service-account-key))
    regexp: server/published/gpdb[[x.gp_ver]]/server-rc-(.*)-[[x.release_platform]]_x86_64.tar.gz
